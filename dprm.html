<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Proyectos Digitales</title>
    <!-- Incluir Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Incluir React y ReactDOM -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <!-- NOTA: El script de Babel (@babel/standalone) ha sido eliminado. Ya no es necesario. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .dark .bg-black {
             background-color: #121212;
        }
    </style>
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 dark:bg-black">

    <div id="root"></div>

    <!-- El tipo de script ahora es "text/javascript" porque el cÃ³digo es JavaScript puro -->
    <script type="text/javascript">
        const { useState, useEffect, useCallback, useMemo } = React;

        // --- DATOS INICIALES DEL PROYECTO ---
        const initialProjectData = [
            {
                id: 1,
                icon: 'ðŸ”',
                title: '1. DiagnÃ³stico y EvaluaciÃ³n Inicial',
                checkpoints: [
                    { id: 101, text: 'Identificar procesos clave que pueden digitalizarse (tareas repetitivas, manuales o crÃ­ticas).', completed: false },
                    { id: 102, text: 'Mapear los flujos actuales ("As-Is") para entender cÃ³mo se ejecutan hoy las tareas.', completed: false },
                    { id: 103, text: 'Evaluar el nivel de madurez digital de la organizaciÃ³n o del equipo involucrado.', completed: false },
                    { id: 104, text: 'Involucrar a los actores clave de cada Ã¡rea (operativos, lÃ­deres y stakeholders).', completed: false },
                    { id: 105, text: 'Detectar fricciones, errores o cuellos de botella en los procesos actuales.', completed: false },
                    { id: 106, text: 'Analizar tecnologÃ­as existentes y entender sus limitaciones o integraciones actuales.', completed: false },
                    { id: 107, text: 'Recolectar datos y evidencias reales (tiempos, costos, errores, volumen de trabajo).', completed: false },
                    { id: 108, text: 'Establecer una lÃ­nea base desde donde se medirÃ¡ la mejora (benchmark interno).', completed: false },
                ],
            },
            {
                id: 2,
                icon: 'ðŸŽ¯',
                title: '2. DefiniciÃ³n de Objetivos y Alcance',
                checkpoints: [
                    { id: 201, text: 'Establecer objetivos SMART (EspecÃ­ficos, Medibles, Alcanzables, Relevantes y con Tiempo definido).', completed: false },
                    { id: 202, text: 'Definir el alcance del proyecto, es decir, quÃ© procesos o Ã¡reas se incluirÃ¡n y cuÃ¡les no.', completed: false },
                    { id: 203, text: 'Alinear los objetivos con la estrategia del negocio (eficiencia, crecimiento, experiencia del cliente, etc.).', completed: false },
                    { id: 204, text: 'Identificar restricciones (presupuesto, tiempo, recursos humanos, tecnologÃ­a disponible).', completed: false },
                    { id: 205, text: 'Asignar responsables claros para cada fase o entregable del proyecto.', completed: false },
                    { id: 206, text: 'Establecer entregables concretos para cada etapa del proyecto.', completed: false },
                    { id: 207, text: 'Priorizar procesos segÃºn impacto y viabilidad, utilizando por ejemplo la matriz Esfuerzo-Impacto.', completed: false },
                    { id: 208, text: 'Establecer criterios de Ã©xito: Â¿CÃ³mo sabremos que el proyecto fue exitoso?', completed: false },
                ],
            },
            {
                id: 3,
                icon: 'âš™ï¸',
                title: '3. SelecciÃ³n de Herramientas y TecnologÃ­as',
                checkpoints: [
                    { id: 301, text: 'Investigar opciones tecnolÃ³gicas disponibles (software, plataformas, APIs, apps low-code/no-code, etc.).', completed: false },
                    { id: 302, text: 'Evaluar cada herramienta segÃºn criterios clave: Costo total, Facilidad de uso, Compatibilidad, Seguridad.', completed: false },
                    { id: 303, text: 'Probar herramientas en entornos demo o versiones gratuitas antes de comprometer inversiÃ³n.', completed: false },
                    { id: 304, text: 'Consultar con el equipo tÃ©cnico o proveedor de TI sobre implicaciones e infraestructura necesaria.', completed: false },
                    { id: 305, text: 'Seleccionar herramientas que escalen con el proyecto, es decir, que puedan crecer conforme crece el uso.', completed: false },
                    { id: 306, text: 'Considerar soluciones que empoderen al usuario final (no depender siempre del Ã¡rea de sistemas).', completed: false },
                    { id: 307, text: 'Verificar si ya hay herramientas internas subutilizadas que puedan adaptarse al proyecto.', completed: false },
                    { id: 308, text: 'Documentar las razones de elecciÃ³n para justificar la decisiÃ³n frente a stakeholders.', completed: false },
                ],
            },
            {
                id: 4,
                icon: 'ðŸ§©',
                title: '4. DiseÃ±o del Proceso Digital (To-Be)',
                checkpoints: [
                    { id: 401, text: 'Modelar el flujo futuro del proceso (To-Be) usando diagramas de flujo, BPMN o herramientas visuales.', completed: false },
                    { id: 402, text: 'Simplificar y optimizar el proceso antes de digitalizarlo, eliminando pasos innecesarios.', completed: false },
                    { id: 403, text: 'Definir claramente las tareas automatizadas vs. las tareas humanas.', completed: false },
                    { id: 404, text: 'Establecer roles y responsables dentro del nuevo flujo digital.', completed: false },
                    { id: 405, text: 'DiseÃ±ar formularios, interfaces o entradas de datos necesarias para operar el proceso.', completed: false },
                    { id: 406, text: 'Incluir reglas de negocio clave (validaciones, condiciones, cÃ¡lculos, aprobaciones, etc.).', completed: false },
                    { id: 407, text: 'Planear alertas, notificaciones o reportes automÃ¡ticos que acompaÃ±en el proceso.', completed: false },
                    { id: 408, text: 'Asegurar trazabilidad: que todo paso deje evidencia digital o log (para auditorÃ­a y mejora continua).', completed: false },
                    { id: 409, text: 'Anticipar excepciones y errores comunes y cÃ³mo deben manejarse digitalmente.', completed: false },
                ],
            },
            {
                id: 5,
                icon: 'ðŸ”§',
                title: '5. Desarrollo y ConfiguraciÃ³n',
                checkpoints: [
                    { id: 501, text: 'Configurar o desarrollar la soluciÃ³n digital segÃºn el diseÃ±o del proceso To-Be.', completed: false },
                    { id: 502, text: 'Construir formularios, automatizaciones, interfaces y dashboards dentro de la herramienta elegida.', completed: false },
                    { id: 503, text: 'Integrar bases de datos o fuentes de informaciÃ³n externas, si el proceso lo requiere.', completed: false },
                    { id: 504, text: 'Conectar con otros sistemas o herramientas existentes (ej. CRM, ERP, correo, SharePoint, etc.).', completed: false },
                    { id: 505, text: 'Aplicar buenas prÃ¡cticas de desarrollo: modularidad, limpieza visual, nombres coherentes, reutilizaciÃ³n.', completed: false },
                    { id: 506, text: 'Configurar reglas de seguridad y permisos de usuario, para definir quiÃ©n puede ver, editar o aprobar.', completed: false },
                    { id: 507, text: 'Crear respaldos periÃ³dicos y sistemas de recuperaciÃ³n ante fallos.', completed: false },
                    { id: 508, text: 'Probar cada componente del sistema de forma individual antes de realizar pruebas completas.', completed: false },
                    { id: 509, text: 'Documentar todo el desarrollo (estructura, lÃ³gica, accesos y decisiones tomadas).', completed: false },
                ],
            },
            {
                id: 6,
                icon: 'ðŸ§ª',
                title: '6. Prueba Piloto',
                checkpoints: [
                    { id: 601, text: 'Seleccionar un grupo reducido de usuarios reales para hacer la prueba (usuarios clave o representantes del flujo).', completed: false },
                    { id: 602, text: 'Ejecutar el proceso digital en un entorno controlado, simulando escenarios reales.', completed: false },
                    { id: 603, text: 'Medir desempeÃ±o del sistema: tiempos de respuesta, exactitud, errores, fricciones.', completed: false },
                    { id: 604, text: 'Observar la experiencia del usuario final: Â¿Entiende? Â¿Comete errores? Â¿Se siente cÃ³modo?', completed: false },
                    { id: 605, text: 'Recolectar feedback estructurado (entrevistas, encuestas o sesiones grabadas).', completed: false },
                    { id: 606, text: 'Registrar errores o bugs, tanto tÃ©cnicos como funcionales.', completed: false },
                    { id: 607, text: 'Documentar hallazgos y oportunidades de mejora antes del despliegue general.', completed: false },
                    { id: 608, text: 'Ajustar el sistema segÃºn los resultados: mejorar formularios, automatizaciones, nomenclaturas o flujos.', completed: false },
                    { id: 609, text: 'Validar cumplimiento de los criterios de Ã©xito definidos en las etapas previas.', completed: false },
                ],
            },
            {
                id: 7,
                icon: 'ðŸš€',
                title: '7. ImplementaciÃ³n General',
                checkpoints: [
                    { id: 701, text: 'Lanzar oficialmente el proceso digitalizado en todo el equipo o Ã¡rea definida.', completed: false },
                    { id: 702, text: 'Capacitar a todos los usuarios finales, con enfoque prÃ¡ctico y adaptado a su nivel.', completed: false },
                    { id: 703, text: 'Entregar materiales de apoyo: manuales, tutoriales, videos cortos, preguntas frecuentes.', completed: false },
                    { id: 704, text: 'Establecer canales de soporte tÃ©cnico y funcional, para resolver dudas o incidencias rÃ¡pidamente.', completed: false },
                    { id: 705, text: 'Designar responsables de seguimiento durante los primeros dÃ­as o semanas del uso real.', completed: false },
                    { id: 706, text: 'Monitorear el uso del sistema en tiempo real, para detectar caÃ­das o errores tempranos.', completed: false },
                    { id: 707, text: 'Aplicar ajustes rÃ¡pidos (hotfixes) si surgen bloqueos crÃ­ticos en la operaciÃ³n.', completed: false },
                    { id: 708, text: 'AcompaÃ±ar emocionalmente el cambio: resolver temores, dudas o resistencias con empatÃ­a.', completed: false },
                    { id: 709, text: 'Comunicar logros y beneficios iniciales, reforzando el valor del cambio para todos los involucrados.', completed: false },
                ],
            },
            {
                id: 8,
                icon: 'ðŸ“Š',
                title: '8. MediciÃ³n y Mejora Continua',
                checkpoints: [
                    { id: 801, text: 'Definir indicadores clave (KPIs) que midan el Ã©xito del proceso digital (ej. tiempo de ejecuciÃ³n, tasa de error, satisfacciÃ³n del usuario, ahorro en costos).', completed: false },
                    { id: 802, text: 'Recolectar datos en tiempo real sobre el uso y desempeÃ±o del sistema.', completed: false },
                    { id: 803, text: 'Comparar resultados con la lÃ­nea base establecida en la etapa de diagnÃ³stico.', completed: false },
                    { id: 804, text: 'Analizar el impacto real del cambio: Â¿se logrÃ³ lo esperado? Â¿QuÃ© mejorÃ³? Â¿QuÃ© no?', completed: false },
                    { id: 805, text: 'Obtener feedback constante de los usuarios, incluso despuÃ©s del lanzamiento (buzÃ³n digital, encuestas, entrevistas).', completed: false },
                    { id: 806, text: 'Priorizar ajustes o nuevas funcionalidades con base en datos y necesidades reales.', completed: false },
                    { id: 807, text: 'Implementar ciclos de mejora continua (Kaizen, PDCA, o iteraciones Ã¡giles).', completed: false },
                    { id: 808, text: 'Comunicar los resultados y aprendizajes al equipo y stakeholders.', completed: false },
                    { id: 809, text: 'Planificar nuevas fases de digitalizaciÃ³n, si aplica (escalado a mÃ¡s procesos o Ã¡reas).', completed: false },
                ],
            },
            {
                id: 9,
                icon: 'â¤ï¸â€ðŸ”¥',
                title: '9. GestiÃ³n del Cambio Cultural (Transversal)',
                checkpoints: [
                    { id: 901, text: 'Comunicar el propÃ³sito del proyecto desde el inicio, no solo el â€œquÃ©â€ se hace, sino el â€œpor quÃ©â€.', completed: false },
                    { id: 902, text: 'Involucrar a lÃ­deres y embajadores del cambio que inspiren y apoyen al resto del equipo.', completed: false },
                    { id: 903, text: 'Anticipar resistencias emocionales o culturales, y abordarlas con empatÃ­a, no con imposiciÃ³n.', completed: false },
                    { id: 904, text: 'Generar confianza y participaciÃ³n, invitando a los equipos a co-crear soluciones.', completed: false },
                    { id: 905, text: 'Reforzar continuamente los beneficios del cambio, con ejemplos reales y casos de Ã©xito.', completed: false },
                    { id: 906, text: 'Celebrar pequeÃ±os logros y victorias tempranas, para mantener la motivaciÃ³n.', completed: false },
                    { id: 907, text: 'Capacitar en habilidades digitales y mindset Ã¡gil, no solo en herramientas tÃ©cnicas.', completed: false },
                    { id: 908, text: 'Reconocer pÃºblicamente a quienes se adaptan rÃ¡pido, creando una cultura de evoluciÃ³n positiva.', completed: false },
                    { id: 909, text: 'Construir una narrativa de transformaciÃ³n, donde cada persona se vea como parte fundamental del cambio.', completed: false },
                ],
            }
        ].map(category => ({ ...category, isOpen: category.id === 1 }));

        // --- COMPONENTES (Ahora usando React.createElement) ---

        const e = React.createElement;

        const ProgressBar = ({ progress }) => {
            return e('div', { className: 'w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700' },
                e('div', {
                    className: 'bg-blue-600 h-2.5 rounded-full transition-all duration-500 ease-out',
                    style: { width: `${progress}%` }
                })
            );
        };

        const CheckpointItem = ({ checkpoint, onToggle }) => {
            return e('li', {
                className: 'flex items-start p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors duration-200 cursor-pointer',
                onClick: onToggle
            },
                e('input', {
                    type: 'checkbox',
                    checked: checkpoint.completed,
                    onChange: onToggle,
                    className: 'w-5 h-5 mt-0.5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 cursor-pointer'
                }),
                e('label', {
                    className: `ml-3 text-sm font-medium ${checkpoint.completed ? 'text-gray-500 dark:text-gray-400 line-through' : 'text-gray-900 dark:text-gray-200'} transition-colors duration-200`
                }, checkpoint.text)
            );
        };

        const Category = ({ category, onToggleCheckpoint, onToggleCategory }) => {
            const progress = useMemo(() => {
                const completedCount = category.checkpoints.filter(c => c.completed).length;
                return (completedCount / category.checkpoints.length) * 100;
            }, [category.checkpoints]);

            const header = e('button', {
                onClick: onToggleCategory,
                className: 'w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200'
            },
                e('div', { className: 'flex items-center text-left' },
                    e('span', { className: 'text-xl mr-3' }, category.icon),
                    e('h3', { className: 'font-semibold text-lg text-gray-900 dark:text-white' }, category.title)
                ),
                e('div', { className: 'flex items-center' },
                    e('span', { className: 'text-sm font-bold text-blue-700 dark:text-blue-400 mr-4' }, `${Math.round(progress)}%`),
                    e('svg', { className: `w-6 h-6 text-gray-600 dark:text-gray-400 transform transition-transform duration-300 ${category.isOpen ? 'rotate-180' : ''}`, fill: 'none', stroke: 'currentColor', viewBox: '0 0 24 24', xmlns: 'http://www.w3.org/2000/svg' },
                        e('path', { strokeLinecap: 'round', strokeLinejoin: 'round', strokeWidth: '2', d: 'M19 9l-7 7-7-7' })
                    )
                )
            );

            const content = category.isOpen && e('div', { className: 'p-4 bg-white dark:bg-gray-900' },
                e(ProgressBar, { progress: progress }),
                e('ul', { className: 'mt-4 space-y-1' },
                    ...category.checkpoints.map(checkpoint =>
                        e(CheckpointItem, {
                            key: checkpoint.id,
                            checkpoint: checkpoint,
                            onToggle: () => onToggleCheckpoint(category.id, checkpoint.id)
                        })
                    )
                )
            );

            return e('div', { className: 'border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden mb-4 shadow-sm' },
                header,
                content
            );
        };

        function App() {
            const [projectData, setProjectData] = useState([]);
            const [isLoading, setIsLoading] = useState(true);
            const storageKey = 'digitalProjectManagerData';

            useEffect(() => {
                try {
                    const savedData = localStorage.getItem(storageKey);
                    if (savedData) {
                        setProjectData(JSON.parse(savedData));
                    } else {
                        setProjectData(initialProjectData);
                    }
                } catch (error) {
                    console.error("Error al cargar datos desde localStorage:", error);
                    setProjectData(initialProjectData);
                }
                setIsLoading(false);
            }, []);

            useEffect(() => {
                if (!isLoading) {
                    try {
                        localStorage.setItem(storageKey, JSON.stringify(projectData));
                    } catch (error) {
                        console.error("Error al guardar datos en localStorage:", error);
                    }
                }
            }, [projectData, isLoading]);

            const handleToggleCheckpoint = useCallback((categoryId, checkpointId) => {
                setProjectData(currentData =>
                    currentData.map(category =>
                        category.id === categoryId ? { ...category, checkpoints: category.checkpoints.map(checkpoint =>
                            checkpoint.id === checkpointId ? { ...checkpoint, completed: !checkpoint.completed } : checkpoint)
                        } : category
                    )
                );
            }, []);

            const handleToggleCategory = useCallback(categoryId => {
                setProjectData(currentData =>
                    currentData.map(category =>
                        category.id === categoryId ? { ...category, isOpen: !category.isOpen } : category
                    )
                );
            }, []);

            const overallProgress = useMemo(() => {
                if (projectData.length === 0) return 0;
                const allCheckpoints = projectData.flatMap(c => c.checkpoints);
                if (allCheckpoints.length === 0) return 0;
                const completedCount = allCheckpoints.filter(c => c.completed).length;
                return (completedCount / allCheckpoints.length) * 100;
            }, [projectData]);

            if (isLoading) {
                return e('div', { className: 'flex items-center justify-center h-screen bg-gray-100 dark:bg-gray-900' },
                    e('div', { className: 'text-center' },
                        e('svg', { className: 'mx-auto h-12 w-12 text-blue-500 animate-spin', xmlns: 'http://www.w3.org/2000/svg', fill: 'none', viewBox: '0 0 24 24' },
                            e('circle', { className: 'opacity-25', cx: '12', cy: '12', r: '10', stroke: 'currentColor', strokeWidth: '4' }),
                            e('path', { className: 'opacity-75', fill: 'currentColor', d: 'M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z' })
                        ),
                        e('p', { className: 'mt-4 text-lg font-semibold text-gray-700 dark:text-gray-300' }, 'Cargando proyecto...')
                    )
                );
            }

            return e('div', { className: 'bg-gray-100 dark:bg-black min-h-screen font-sans' },
                e('div', { className: 'container mx-auto p-4 sm:p-6 md:p-8' },
                    e('header', { className: 'mb-8 p-6 bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700' },
                        e('h1', { className: 'text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-2' }, 'Gestor de Proyectos Digitales'),
                        e('p', { className: 'text-md text-gray-600 dark:text-gray-400 mb-4' }, 'Sigue el avance de tu proyecto de digitalizaciÃ³n paso a paso.'),
                        e('div', { className: 'flex items-center' },
                            e('span', { className: 'text-lg font-bold text-blue-700 dark:text-blue-400 mr-3' }, `${Math.round(overallProgress)}%`),
                            e(ProgressBar, { progress: overallProgress })
                        )
                    ),
                    e('main', null,
                        ...projectData.map(category =>
                            e(Category, {
                                key: category.id,
                                category: category,
                                onToggleCheckpoint: handleToggleCheckpoint,
                                onToggleCategory: () => handleToggleCategory(category.id)
                            })
                        )
                    ),
                    e('footer', { className: 'text-center mt-8' },
                        e('p', { className: 'text-xs text-gray-500 dark:text-gray-400' }, 'Los datos se guardan localmente en tu navegador.')
                    )
                )
            );
        }

        ReactDOM.render(e(App), document.getElementById('root'));
    </script>
</body>
</html>
